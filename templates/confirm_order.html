<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Order Confirmation</title>
    <meta name="x-apple-disable-message-reformatting">
    <style>
      html, body { margin:0 !important; padding:0 !important; height:100% !important; width:100% !important; }
      * { -ms-text-size-adjust:100%; -webkit-text-size-adjust:100%; }
      table, td { mso-table-lspace:0pt !important; mso-table-rspace:0pt !important; }
      img { -ms-interpolation-mode:bicubic; border:0; outline:none; text-decoration:none; display:block; }
      a { text-decoration:none; }
      .email-body { width:100%; background-color:#f6f7fb; }
      .container { width:100%; max-width:600px; margin:0 auto; }
      .px { padding-left:24px; padding-right:24px; }
      .py { padding-top:24px; padding-bottom:24px; }
      .font { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, 'Apple Color Emoji','Segoe UI Emoji', 'Segoe UI Symbol', sans-serif; color:#1f2937; }
      h1 { margin:0 0 8px 0; font-size:24px; line-height:1.25; font-weight:700; }
      h2 { margin:0 0 8px 0; font-size:18px; line-height:1.35; font-weight:600; }
      p { margin:0 0 12px 0; font-size:14px; line-height:1.6; }
      .muted { color:#6b7280; }
      .small { font-size:12px; }
      .card { background:#ffffff; border-radius:12px; box-shadow:0 1px 2px rgba(0,0,0,0.05); }
      .divider { height:1px; background:#e5e7eb; line-height:1px; }
      .btn { display:inline-block; background:#16a34a; color:#ffffff !important; padding:12px 20px; border-radius:10px; font-weight:700; }
      .btn:hover { opacity:0.9; }
      .items-table { width:100%; border-collapse:collapse; }
      .items-table th { text-align:right; font-size:12px; text-transform:uppercase; letter-spacing:.02em; padding:10px 0; color:#6b7280; border-bottom:1px solid #e5e7eb; }
      .items-table td { padding:12px 0; border-bottom:1px solid #f0f2f5; vertical-align:top; font-size:14px; }
      .right { text-align:right; }
      .badge { display:inline-block; font-size:12px; padding:4px 8px; border-radius:9999px; background:#ffc107; color:#864000; font-weight:600; }
      @media (max-width:600px) {
        .px { padding-left:16px !important; padding-right:16px !important; }
        .py { padding-top:16px !important; padding-bottom:16px !important; }
        h1 { font-size:21px !important; }
        .stack-sm { display:block !important; width:100% !important; }
        .w-auto { width:auto !important; }
        .hide-sm { display:none !important; }
      }
      @media (prefers-color-scheme: dark) {
        .email-body { background:#0b0f14 !important; }
        .card { background:#111827 !important; }
        .font { color:#e5e7eb !important; }
        .muted { color:#9ca3af !important; }
        .divider { background:#1f2937 !important; }
        .items-table th { color:#a3a3a3 !important; border-color:#1f2937 !important; }
        .items-table td { border-color:#1f2937 !important; }
      }
    </style>
  </head>
  <body class="email-body" style="margin:0; padding:0;" bgcolor="#f6f7fb">
    <div style="display:none; max-height:0; overflow:hidden; mso-hide:all;">
      Thanks for your order {{ order_info.id }} — we’re packing your yummy now.
    </div>
    <div>
      <table cellspacing="0" cellpadding="0" border="0" width="100%">
        <tr>
          <td align="center" class="px py">
            <table class="container" cellspacing="0" cellpadding="0" border="0">
              <tr>
                <td class="font" style="padding:8px 0; text-align:left;">
                  <a href="http://127.0.0.1:5000/">
                    <span style="font-family: Cookie, cursive; color: #ff7a00; font-size: 30px; font-weight: bold; font-style: italic;">Boorsoq</span>
                  </a>
                </td>
                <td class="font right" style="padding:8px 0;">
                  <span class="badge">Order Confirmed</span>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>

      <table cellspacing="0" cellpadding="0" border="0" width="100%">
        <tr>
          <td align="center" class="px">
            <table class="container card" cellspacing="0" cellpadding="0" border="0">
              <tr>
                <td class="font py px">
                  <h1>Thanks for your order, {{ user.name }}!</h1>
                  <p>
                    We're preparing your order. Your order <strong>#{{ order_info.id }}</strong> was placed on
                    <strong>{{ order_info.created_at.strftime('%d-%m-%Y') }}</strong> and will be ready by <strong>{{ order_info.ready_by_date.strftime('%d-%m-%Y') }}</strong>.
                    Our manager will contact you as soon as possible.
                  </p>
                  <div class="divider" style="margin:16px 0;"></div>
                  <table width="100%" cellspacing="0" cellpadding="0" border="0">
                    <tr>
                      <td class="font stack-sm" width="50%" style="padding-right:8px;">
                        <h2 class="muted" style="margin-bottom:6px;">Delivery details</h2>
                        <p style="margin:0;">
                          {{ user.name }}<br>
                          <span class="muted">Phone:</span> {{ user.phone_number }} <br>
                          <span class="muted">E-mail:</span> {{ user.email }}
                        </p>
                      </td>
                      <td class="font stack-sm" width="50%" style="padding-left:8px;">
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>

      <table cellspacing="0" cellpadding="0" border="0" width="100%">
        <tr>
          <td align="center" class="px py">
            <table class="container card" cellspacing="0" cellpadding="0" border="0">
              <tr>
                <td class="font px py">
                  <h2>Your items</h2>
                  <table class="items-table" cellspacing="0" cellpadding="0" border="0">
                    <thead>
                      <tr>
                        <th scope="col" style="text-align: left;">Item</th>
                        <th scope="col" class="right">Qty</th>
                        <th scope="col" class="right">Price</th>
                        <th scope="col" class="right">Subtotal</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for item in order_items %}
                      <tr>
                        <td>
                          <table cellspacing="0" cellpadding="0" border="0" width="100%" style="border-bottom: none;">
                            <tr style="border-bottom: none;">
                              <td width="56" class="hide-sm" style="padding-right:12px; border-bottom: none;">
                                <img src="{{ item.item.image_url }}" width="56" height="56" alt="{{ item.item.name }}" style="border-radius: 8px; object-fit: cover;">
                              </td>
                              <td class="font w-auto" style="border-bottom: none;">
                                <strong style="display:block;">{{ item.item.name }}</strong>
                              </td>
                            </tr>
                          </table>
                        </td>
                        <td class="right">{{ item.quantity }}</td>
                        <td class="right">£{{ (item.price/100)|round(2) }}</td>
                        <td class="right">£{{ (item.quantity * (item.price/100))|round(2) }}</td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>

                  <table cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-top:8px;">
                    <tr>
                      <td class="font" style="padding:10px 0; font-weight:700; border-top:1px solid #e5e7eb;">Total</td>
                      <td class="font right" style="padding:10px 0; font-weight:700; border-top:1px solid #e5e7eb;">£{{ (order_info.total_price/100)|round(2) }}</td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>

      <table cellspacing="0" cellpadding="0" border="0" width="100%">
        <tr>
          <td align="center" class="px py">
            <table class="container" cellspacing="0" cellpadding="0" border="0">
              <tr>
                <td class="font small" style="text-align:center; color:#6b7280;">
                  <p class="muted">© {{current_year}} Boorsoq. All rights reserved.</p>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
    </div>
  </body>
</html>
